module.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=24)}([function(t,e){t.exports=flarum.core.compat["common/app"]},function(t,e,r){"use strict";function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,n(t,e)}r.d(e,"a",(function(){return i}))},,function(t,e){t.exports=flarum.core.compat["common/Model"]},function(t,e){t.exports=flarum.core.compat["common/components/Button"]},function(t,e,r){t.exports=r(12)},function(t,e,r){"use strict";function n(t,e,r,n,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,i)}function i(t){return function(){var e=this,r=arguments;return new Promise((function(i,o){var a=t.apply(e,r);function s(t){n(a,i,o,s,c,"next",t)}function c(t){n(a,i,o,s,c,"throw",t)}s(void 0)}))}}r.d(e,"a",(function(){return i}))},function(t,e){t.exports=flarum.core.compat["common/components/LoadingIndicator"]},function(t,e){t.exports=flarum.core.compat["common/models/Discussion"]},function(t,e){t.exports=flarum.core.compat["forum/app"]},function(t,e){t.exports=flarum.core.compat["common/components/Modal"]},function(t,e,r){"use strict";r.d(e,"a",(function(){return l}));var n=r(0),i=r.n(n),o=r(1),a=r(3),s=r.n(a),c=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).displayName=s.a.attribute("displayName"),e.description=s.a.attribute("description"),e.credit=s.a.attribute("credit"),e.creditedDiscussions=s.a.hasMany("discussions"),e}return Object(o.a)(e,t),e}(s.a),u=r(8),h=r.n(u);function l(){i.a.store.models.virtualAuthors=c,h.a.prototype.virtualAuthors=s.a.hasMany("virtualAuthors"),h.a.prototype.canSetVirtualAuthors=s.a.attribute("canSetVirtualAuthors")}},function(t,e,r){var n=function(t){"use strict";var e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof l?e:l,o=Object.create(i.prototype),a=new _(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return L()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),o}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h={};function l(){}function f(){}function d(){}var v={};s(v,i,(function(){return this}));var p=Object.getPrototypeOf,m=p&&p(p(A([])));m&&m!==e&&r.call(m,i)&&(v=m);var g=d.prototype=l.prototype=Object.create(v);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){var n;this._invoke=function(i,o){function a(){return new e((function(n,a){!function n(i,o,a,s){var c=u(t[i],t,o);if("throw"!==c.type){var h=c.arg,l=h.value;return l&&"object"==typeof l&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){h.value=t,a(h)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function A(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return f.prototype=d,s(g,"constructor",d),s(d,"constructor",f),f.displayName=s(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(x.prototype),s(x.prototype,o,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new x(c(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=A,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),M(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;M(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:A(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}(t.exports);try{regeneratorRuntime=n}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},function(t,e){t.exports=flarum.core.compat["common/extend"]},function(t,e){t.exports=flarum.core.compat["common/utils/withAttr"]},function(t,e){t.exports=flarum.core.compat["forum/utils/DiscussionControls"]},function(t,e){t.exports=flarum.core.compat["common/components/Tooltip"]},function(t,e){t.exports=flarum.core.compat["common/utils/string"]},function(t,e){t.exports=flarum.core.compat["v17development/blog/components/BlogPostController"]},,,,,,function(t,e,r){"use strict";r.r(e);var n=r(9),i=r.n(n),o=r(13),a=r(15),s=r.n(a),c=r(11),u=r(4),h=r.n(u),l=r(6);function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),t}var v=r(1),p=r(5),g=r.n(p),y=r(0),x=r.n(y),w=r(7),b=r.n(w),M=r(10),_=r.n(M),A=r(16),L=r.n(A),k=r(14),S=r.n(k),O=r(17);function j(){return(j=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function I(t){return Array.isArray?Array.isArray(t):"[object Array]"===R(t)}function E(t){return"string"==typeof t}function V(t){return"number"==typeof t}function C(t){return!0===t||!1===t||function(t){return F(t)&&null!==t}(t)&&"[object Boolean]"==R(t)}function F(t){return"object"==typeof t}function N(t){return null!=t}function $(t){return!t.trim().length}function R(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}var P=Object.prototype.hasOwnProperty,T=function(){function t(t){var e=this;this._keys=[],this._keyMap={};var r=0;t.forEach((function(t){var n=B(t);r+=n.weight,e._keys.push(n),e._keyMap[n.id]=n,r+=n.weight})),this._keys.forEach((function(t){t.weight/=r}))}var e=t.prototype;return e.get=function(t){return this._keyMap[t]},e.keys=function(){return this._keys},e.toJSON=function(){return JSON.stringify(this._keys)},t}();function B(t){var e=null,r=null,n=null,i=1;if(E(t)||I(t))n=t,e=G(t),r=z(t);else{if(!P.call(t,"name"))throw new Error(function(t){return"Missing "+t+" property in key"}("name"));var o=t.name;if(n=o,P.call(t,"weight")&&(i=t.weight)<=0)throw new Error(function(t){return"Property 'weight' in key '"+t+"' must be a positive integer"}(o));e=G(o),r=z(o)}return{path:e,id:r,weight:i,src:n}}function G(t){return I(t)?t:t.split(".")}function z(t){return I(t)?t.join("."):t}var D=j({},{isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:function(t,e){return t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1}},{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},{location:0,threshold:.6,distance:100},{useExtendedSearch:!1,getFn:function(t,e){var r=[],n=!1;return function t(e,i,o){if(N(e))if(i[o]){var a=e[i[o]];if(!N(a))return;if(o===i.length-1&&(E(a)||V(a)||C(a)))r.push(function(t){return null==t?"":function(t){if("string"==typeof t)return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(t)}(a));else if(I(a)){n=!0;for(var s=0,c=a.length;s<c;s+=1)t(a[s],i,o+1)}else i.length&&t(a,i,o+1)}else r.push(e)}(t,E(e)?e.split("."):e,0),n?r:r[0]},ignoreLocation:!1,ignoreFieldNorm:!1}),K=/[^ ]+/g;var q=function(){function t(t){var e=(void 0===t?{}:t).getFn,r=void 0===e?D.getFn:e;this.norm=function(t){void 0===t&&(t=3);var e=new Map,r=Math.pow(10,t);return{get:function(t){var n=t.match(K).length;if(e.has(n))return e.get(n);var i=1/Math.sqrt(n),o=parseFloat(Math.round(i*r)/r);return e.set(n,o),o},clear:function(){e.clear()}}}(3),this.getFn=r,this.isCreated=!1,this.setIndexRecords()}var e=t.prototype;return e.setSources=function(t){void 0===t&&(t=[]),this.docs=t},e.setIndexRecords=function(t){void 0===t&&(t=[]),this.records=t},e.setKeys=function(t){var e=this;void 0===t&&(t=[]),this.keys=t,this._keysMap={},t.forEach((function(t,r){e._keysMap[t.id]=r}))},e.create=function(){var t=this;!this.isCreated&&this.docs.length&&(this.isCreated=!0,E(this.docs[0])?this.docs.forEach((function(e,r){t._addString(e,r)})):this.docs.forEach((function(e,r){t._addObject(e,r)})),this.norm.clear())},e.add=function(t){var e=this.size();E(t)?this._addString(t,e):this._addObject(t,e)},e.removeAt=function(t){this.records.splice(t,1);for(var e=t,r=this.size();e<r;e+=1)this.records[e].i-=1},e.getValueForItemAtKeyId=function(t,e){return t[this._keysMap[e]]},e.size=function(){return this.records.length},e._addString=function(t,e){if(N(t)&&!$(t)){var r={v:t,i:e,n:this.norm.get(t)};this.records.push(r)}},e._addObject=function(t,e){var r=this,n={i:e,$:{}};this.keys.forEach((function(e,i){var o=r.getFn(t,e.path);if(N(o))if(I(o))!function(){for(var t=[],e=[{nestedArrIndex:-1,value:o}];e.length;){var a=e.pop(),s=a.nestedArrIndex,c=a.value;if(N(c))if(E(c)&&!$(c)){var u={v:c,i:s,n:r.norm.get(c)};t.push(u)}else I(c)&&c.forEach((function(t,r){e.push({nestedArrIndex:r,value:t})}))}n.$[i]=t}();else if(!$(o)){var a={v:o,n:r.norm.get(o)};n.$[i]=a}})),this.records.push(n)},e.toJSON=function(){return{keys:this.keys,records:this.records}},t}();function W(t,e,r){var n=(void 0===r?{}:r).getFn,i=void 0===n?D.getFn:n,o=new q({getFn:i});return o.setKeys(t.map(B)),o.setSources(e),o.create(),o}function J(t,e){var r=void 0===e?{}:e,n=r.errors,i=void 0===n?0:n,o=r.currentLocation,a=void 0===o?0:o,s=r.expectedLocation,c=void 0===s?0:s,u=r.distance,h=void 0===u?D.distance:u,l=r.ignoreLocation,f=void 0===l?D.ignoreLocation:l,d=i/t.length;if(f)return d;var v=Math.abs(c-a);return h?d+v/h:v?1:d}function Y(t,e,r,n){var i=void 0===n?{}:n,o=i.location,a=void 0===o?D.location:o,s=i.distance,c=void 0===s?D.distance:s,u=i.threshold,h=void 0===u?D.threshold:u,l=i.findAllMatches,f=void 0===l?D.findAllMatches:l,d=i.minMatchCharLength,v=void 0===d?D.minMatchCharLength:d,p=i.includeMatches,m=void 0===p?D.includeMatches:p,g=i.ignoreLocation,y=void 0===g?D.ignoreLocation:g;if(e.length>32)throw new Error("Pattern length exceeds max of "+32+".");for(var x,w=e.length,b=t.length,M=Math.max(0,Math.min(a,b)),_=h,A=M,L=v>1||m,k=L?Array(b):[];(x=t.indexOf(e,A))>-1;){var S=J(e,{currentLocation:x,expectedLocation:M,distance:c,ignoreLocation:y});if(_=Math.min(S,_),A=x+w,L)for(var O=0;O<w;)k[x+O]=1,O+=1}A=-1;for(var j=[],I=1,E=w+b,V=1<<w-1,C=0;C<w;C+=1){for(var F=0,N=E;F<N;){J(e,{errors:C,currentLocation:M+N,expectedLocation:M,distance:c,ignoreLocation:y})<=_?F=N:E=N,N=Math.floor((E-F)/2+F)}E=N;var $=Math.max(1,M-N+1),R=f?b:Math.min(M+N,b)+w,P=Array(R+2);P[R+1]=(1<<C)-1;for(var T=R;T>=$;T-=1){var B=T-1,G=r[t.charAt(B)];if(L&&(k[B]=+!!G),P[T]=(P[T+1]<<1|1)&G,C&&(P[T]|=(j[T+1]|j[T])<<1|1|j[T+1]),P[T]&V&&(I=J(e,{errors:C,currentLocation:B,expectedLocation:M,distance:c,ignoreLocation:y}))<=_){if(_=I,(A=B)<=M)break;$=Math.max(1,2*M-A)}}if(J(e,{errors:C+1,currentLocation:M,expectedLocation:M,distance:c,ignoreLocation:y})>_)break;j=P}var z={isMatch:A>=0,score:Math.max(.001,I)};if(L){var K=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=D.minMatchCharLength);for(var r=[],n=-1,i=-1,o=0,a=t.length;o<a;o+=1){var s=t[o];s&&-1===n?n=o:s||-1===n||((i=o-1)-n+1>=e&&r.push([n,i]),n=-1)}return t[o-1]&&o-n>=e&&r.push([n,o-1]),r}(k,v);K.length?m&&(z.indices=K):z.isMatch=!1}return z}function Q(t){for(var e={},r=0,n=t.length;r<n;r+=1){var i=t.charAt(r);e[i]=(e[i]||0)|1<<n-r-1}return e}var U=function(){function t(t,e){var r=this,n=void 0===e?{}:e,i=n.location,o=void 0===i?D.location:i,a=n.threshold,s=void 0===a?D.threshold:a,c=n.distance,u=void 0===c?D.distance:c,h=n.includeMatches,l=void 0===h?D.includeMatches:h,f=n.findAllMatches,d=void 0===f?D.findAllMatches:f,v=n.minMatchCharLength,p=void 0===v?D.minMatchCharLength:v,m=n.isCaseSensitive,g=void 0===m?D.isCaseSensitive:m,y=n.ignoreLocation,x=void 0===y?D.ignoreLocation:y;if(this.options={location:o,threshold:s,distance:u,includeMatches:l,findAllMatches:d,minMatchCharLength:p,isCaseSensitive:g,ignoreLocation:x},this.pattern=g?t:t.toLowerCase(),this.chunks=[],this.pattern.length){var w=function(t,e){r.chunks.push({pattern:t,alphabet:Q(t),startIndex:e})},b=this.pattern.length;if(b>32){for(var M=0,_=b%32,A=b-_;M<A;)w(this.pattern.substr(M,32),M),M+=32;if(_){var L=b-32;w(this.pattern.substr(L),L)}}else w(this.pattern,0)}}return t.prototype.searchIn=function(t){var e=this.options,r=e.isCaseSensitive,n=e.includeMatches;if(r||(t=t.toLowerCase()),this.pattern===t){var i={isMatch:!0,score:0};return n&&(i.indices=[[0,t.length-1]]),i}var o=this.options,a=o.location,s=o.distance,c=o.threshold,u=o.findAllMatches,h=o.minMatchCharLength,l=o.ignoreLocation,f=[],d=0,v=!1;this.chunks.forEach((function(e){var r=e.pattern,i=e.alphabet,o=e.startIndex,p=Y(t,r,i,{location:a+o,distance:s,threshold:c,findAllMatches:u,minMatchCharLength:h,includeMatches:n,ignoreLocation:l}),m=p.isMatch,g=p.score,y=p.indices;m&&(v=!0),d+=g,m&&y&&(f=[].concat(f,y))}));var p={isMatch:v,score:v?d/this.chunks.length:1};return v&&n&&(p.indices=f),p},t}(),H=function(){function t(t){this.pattern=t}return t.isMultiMatch=function(t){return X(t,this.multiRegex)},t.isSingleMatch=function(t){return X(t,this.singleRegex)},t.prototype.search=function(){},t}();function X(t,e){var r=t.match(e);return r?r[1]:null}var Z=function(t){function e(e){return t.call(this,e)||this}return Object(v.a)(e,t),e.prototype.search=function(t){var e=t===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}},d(e,null,[{key:"type",get:function(){return"exact"}},{key:"multiRegex",get:function(){return/^="(.*)"$/}},{key:"singleRegex",get:function(){return/^=(.*)$/}}]),e}(H),tt=function(t){function e(e){return t.call(this,e)||this}return Object(v.a)(e,t),e.prototype.search=function(t){var e=-1===t.indexOf(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}},d(e,null,[{key:"type",get:function(){return"inverse-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"$/}},{key:"singleRegex",get:function(){return/^!(.*)$/}}]),e}(H),et=function(t){function e(e){return t.call(this,e)||this}return Object(v.a)(e,t),e.prototype.search=function(t){var e=t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}},d(e,null,[{key:"type",get:function(){return"prefix-exact"}},{key:"multiRegex",get:function(){return/^\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^\^(.*)$/}}]),e}(H),rt=function(t){function e(e){return t.call(this,e)||this}return Object(v.a)(e,t),e.prototype.search=function(t){var e=!t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}},d(e,null,[{key:"type",get:function(){return"inverse-prefix-exact"}},{key:"multiRegex",get:function(){return/^!\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^!\^(.*)$/}}]),e}(H),nt=function(t){function e(e){return t.call(this,e)||this}return Object(v.a)(e,t),e.prototype.search=function(t){var e=t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[t.length-this.pattern.length,t.length-1]}},d(e,null,[{key:"type",get:function(){return"suffix-exact"}},{key:"multiRegex",get:function(){return/^"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^(.*)\$$/}}]),e}(H),it=function(t){function e(e){return t.call(this,e)||this}return Object(v.a)(e,t),e.prototype.search=function(t){var e=!t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}},d(e,null,[{key:"type",get:function(){return"inverse-suffix-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^!(.*)\$$/}}]),e}(H),ot=function(t){function e(e,r){var n,i=void 0===r?{}:r,o=i.location,a=void 0===o?D.location:o,s=i.threshold,c=void 0===s?D.threshold:s,u=i.distance,h=void 0===u?D.distance:u,l=i.includeMatches,f=void 0===l?D.includeMatches:l,d=i.findAllMatches,v=void 0===d?D.findAllMatches:d,p=i.minMatchCharLength,m=void 0===p?D.minMatchCharLength:p,g=i.isCaseSensitive,y=void 0===g?D.isCaseSensitive:g,x=i.ignoreLocation,w=void 0===x?D.ignoreLocation:x;return(n=t.call(this,e)||this)._bitapSearch=new U(e,{location:a,threshold:c,distance:h,includeMatches:f,findAllMatches:v,minMatchCharLength:m,isCaseSensitive:y,ignoreLocation:w}),n}return Object(v.a)(e,t),e.prototype.search=function(t){return this._bitapSearch.searchIn(t)},d(e,null,[{key:"type",get:function(){return"fuzzy"}},{key:"multiRegex",get:function(){return/^"(.*)"$/}},{key:"singleRegex",get:function(){return/^(.*)$/}}]),e}(H),at=function(t){function e(e){return t.call(this,e)||this}return Object(v.a)(e,t),e.prototype.search=function(t){for(var e,r=0,n=[],i=this.pattern.length;(e=t.indexOf(this.pattern,r))>-1;)r=e+i,n.push([e,r-1]);var o=!!n.length;return{isMatch:o,score:o?0:1,indices:n}},d(e,null,[{key:"type",get:function(){return"include"}},{key:"multiRegex",get:function(){return/^'"(.*)"$/}},{key:"singleRegex",get:function(){return/^'(.*)$/}}]),e}(H),st=[Z,at,et,rt,it,nt,tt,ot],ct=st.length,ut=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/;var ht=new Set([ot.type,at.type]),lt=function(){function t(t,e){var r=void 0===e?{}:e,n=r.isCaseSensitive,i=void 0===n?D.isCaseSensitive:n,o=r.includeMatches,a=void 0===o?D.includeMatches:o,s=r.minMatchCharLength,c=void 0===s?D.minMatchCharLength:s,u=r.ignoreLocation,h=void 0===u?D.ignoreLocation:u,l=r.findAllMatches,f=void 0===l?D.findAllMatches:l,d=r.location,v=void 0===d?D.location:d,p=r.threshold,m=void 0===p?D.threshold:p,g=r.distance,y=void 0===g?D.distance:g;this.query=null,this.options={isCaseSensitive:i,includeMatches:a,minMatchCharLength:c,findAllMatches:f,ignoreLocation:h,location:v,threshold:m,distance:y},this.pattern=i?t:t.toLowerCase(),this.query=function(t,e){return void 0===e&&(e={}),t.split("|").map((function(t){for(var r=t.trim().split(ut).filter((function(t){return t&&!!t.trim()})),n=[],i=0,o=r.length;i<o;i+=1){for(var a=r[i],s=!1,c=-1;!s&&++c<ct;){var u=st[c],h=u.isMultiMatch(a);h&&(n.push(new u(h,e)),s=!0)}if(!s)for(c=-1;++c<ct;){var l=st[c],f=l.isSingleMatch(a);if(f){n.push(new l(f,e));break}}}return n}))}(this.pattern,this.options)}return t.condition=function(t,e){return e.useExtendedSearch},t.prototype.searchIn=function(t){var e=this.query;if(!e)return{isMatch:!1,score:1};var r=this.options,n=r.includeMatches;t=r.isCaseSensitive?t:t.toLowerCase();for(var i=0,o=[],a=0,s=0,c=e.length;s<c;s+=1){var u=e[s];o.length=0,i=0;for(var h=0,l=u.length;h<l;h+=1){var f=u[h],d=f.search(t),v=d.isMatch,p=d.indices,m=d.score;if(!v){a=0,i=0,o.length=0;break}if(i+=1,a+=m,n){var g=f.constructor.type;ht.has(g)?o=[].concat(o,p):o.push(p)}}if(i){var y={isMatch:!0,score:a/i};return n&&(y.indices=o),y}}return{isMatch:!1,score:1}},t}(),ft=[];function dt(t,e){for(var r=0,n=ft.length;r<n;r+=1){var i=ft[r];if(i.condition(t,e))return new i(t,e)}return new U(t,e)}var vt="$and",pt="$or",mt="$path",gt="$val",yt=function(t){return!(!t[vt]&&!t[pt])},xt=function(t){var e;return(e={})[vt]=Object.keys(t).map((function(e){var r;return(r={})[e]=t[e],r})),e};function wt(t,e,r){var n=(void 0===r?{}:r).auto,i=void 0===n||n;return yt(t)||(t=xt(t)),function t(r){var n=Object.keys(r),o=function(t){return!!t[mt]}(r);if(!o&&n.length>1&&!yt(r))return t(xt(r));if(function(t){return!I(t)&&F(t)&&!yt(t)}(r)){var a=o?r[mt]:n[0],s=o?r[gt]:r[a];if(!E(s))throw new Error(function(t){return"Invalid value for key "+t}(a));var c={keyId:z(a),pattern:s};return i&&(c.searcher=dt(s,e)),c}var u={children:[],operator:n[0]};return n.forEach((function(e){var n=r[e];I(n)&&n.forEach((function(e){u.children.push(t(e))}))})),u}(t)}function bt(t,e){var r=t.matches;e.matches=[],N(r)&&r.forEach((function(t){if(N(t.indices)&&t.indices.length){var r={indices:t.indices,value:t.value};t.key&&(r.key=t.key.src),t.idx>-1&&(r.refIndex=t.idx),e.matches.push(r)}}))}function Mt(t,e){e.score=t.score}var _t=function(){function t(t,e,r){void 0===e&&(e={}),this.options=j({},D,e),this.options.useExtendedSearch,this._keyStore=new T(this.options.keys),this.setCollection(t,r)}var e=t.prototype;return e.setCollection=function(t,e){if(this._docs=t,e&&!(e instanceof q))throw new Error("Incorrect 'index' type");this._myIndex=e||W(this.options.keys,this._docs,{getFn:this.options.getFn})},e.add=function(t){N(t)&&(this._docs.push(t),this._myIndex.add(t))},e.remove=function(t){void 0===t&&(t=function(){return!1});for(var e=[],r=0,n=this._docs.length;r<n;r+=1){var i=this._docs[r];t(i,r)&&(this.removeAt(r),r-=1,n-=1,e.push(i))}return e},e.removeAt=function(t){this._docs.splice(t,1),this._myIndex.removeAt(t)},e.getIndex=function(){return this._myIndex},e.search=function(t,e){var r=(void 0===e?{}:e).limit,n=void 0===r?-1:r,i=this.options,o=i.includeMatches,a=i.includeScore,s=i.shouldSort,c=i.sortFn,u=i.ignoreFieldNorm,h=E(t)?E(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return function(t,e){var r=e.ignoreFieldNorm,n=void 0===r?D.ignoreFieldNorm:r;t.forEach((function(t){var e=1;t.matches.forEach((function(t){var r=t.key,i=t.norm,o=t.score,a=r?r.weight:null;e*=Math.pow(0===o&&a?Number.EPSILON:o,(a||1)*(n?1:i))})),t.score=e}))}(h,{ignoreFieldNorm:u}),s&&h.sort(c),V(n)&&n>-1&&(h=h.slice(0,n)),function(t,e,r){var n=void 0===r?{}:r,i=n.includeMatches,o=void 0===i?D.includeMatches:i,a=n.includeScore,s=void 0===a?D.includeScore:a,c=[];return o&&c.push(bt),s&&c.push(Mt),t.map((function(t){var r=t.idx,n={item:e[r],refIndex:r};return c.length&&c.forEach((function(e){e(t,n)})),n}))}(h,this._docs,{includeMatches:o,includeScore:a})},e._searchStringList=function(t){var e=dt(t,this.options),r=this._myIndex.records,n=[];return r.forEach((function(t){var r=t.v,i=t.i,o=t.n;if(N(r)){var a=e.searchIn(r),s=a.isMatch,c=a.score,u=a.indices;s&&n.push({item:r,idx:i,matches:[{score:c,value:r,norm:o,indices:u}]})}})),n},e._searchLogical=function(t){var e=this,r=wt(t,this.options),n=this._myIndex.records,i={},o=[];return n.forEach((function(t){var n=t.$,a=t.i;if(N(n)){var s=function t(r,n,i){if(!r.children){var o=r.keyId,a=r.searcher,s=e._findMatches({key:e._keyStore.get(o),value:e._myIndex.getValueForItemAtKeyId(n,o),searcher:a});return s&&s.length?[{idx:i,item:n,matches:s}]:[]}switch(r.operator){case vt:for(var c=[],u=0,h=r.children.length;u<h;u+=1){var l=t(r.children[u],n,i);if(!l.length)return[];c.push.apply(c,l)}return c;case pt:for(var f=[],d=0,v=r.children.length;d<v;d+=1){var p=t(r.children[d],n,i);if(p.length){f.push.apply(f,p);break}}return f}}(r,n,a);s.length&&(i[a]||(i[a]={idx:a,item:n,matches:[]},o.push(i[a])),s.forEach((function(t){var e,r=t.matches;(e=i[a].matches).push.apply(e,r)})))}})),o},e._searchObjectList=function(t){var e=this,r=dt(t,this.options),n=this._myIndex,i=n.keys,o=n.records,a=[];return o.forEach((function(t){var n=t.$,o=t.i;if(N(n)){var s=[];i.forEach((function(t,i){s.push.apply(s,e._findMatches({key:t,value:n[i],searcher:r}))})),s.length&&a.push({idx:o,item:n,matches:s})}})),a},e._findMatches=function(t){var e=t.key,r=t.value,n=t.searcher;if(!N(r))return[];var i=[];if(I(r))r.forEach((function(t){var r=t.v,o=t.i,a=t.n;if(N(r)){var s=n.searchIn(r),c=s.isMatch,u=s.score,h=s.indices;c&&i.push({score:u,key:e,value:r,idx:o,norm:a,indices:h})}}));else{var o=r.v,a=r.n,s=n.searchIn(o),c=s.isMatch,u=s.score,h=s.indices;c&&i.push({score:u,key:e,value:o,norm:a,indices:h})}return i},t}();_t.version="6.4.6",_t.createIndex=W,_t.parseIndex=function(t,e){var r=(void 0===e?{}:e).getFn,n=void 0===r?D.getFn:r,i=t.keys,o=t.records,a=new q({getFn:n});return a.setKeys(i),a.setIndexRecords(o),a},_t.config=D,_t.parseQuery=wt,function(){ft.push.apply(ft,arguments)}(lt);var At=_t,Lt=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).attrs=void 0,e.allVirtualAuthors=null,e.virtualAuthors=null,e.selectedVirtualAuthors=[],e.filterString="",e}Object(v.a)(e,t);var r=e.prototype;return r.oninit=function(e){t.prototype.oninit.call(this,e),this.selectedVirtualAuthors=this.attrs.discussion.virtualAuthors().map((function(t){return{id:t.id(),credit:t.credit()}})),this.loadData()},r.className=function(){return"SetVirtualAuthorsModal"},r.title=function(){return x.a.translator.trans("davwheat-virtual-authors.forum.set_modal.title")},r.content=function(){var t=this;return this.allVirtualAuthors?m("div",{class:"Modal-body"},m("p",null,x.a.translator.trans("davwheat-virtual-authors.forum.set_modal.existing")),m("div",{className:"Form-group SelectedVirtualAuthorList"},0===this.selectedVirtualAuthors.length&&m("div",{class:"Placeholder"},m("p",null,x.a.translator.trans("davwheat-virtual-authors.forum.set_modal.none_existing"))),this.selectedVirtualAuthors.map((function(e){return t.selectedVirtualAuthorItem(e)}))),m("p",null,x.a.translator.trans("davwheat-virtual-authors.forum.set_modal.add_new")),m("div",{class:"Form-group"},m("label",{for:"virtualAuthorFilterTb",class:"sr-only"},x.a.translator.trans("davwheat-virtual-authors.forum.set_modal.search")),m("input",{class:"FormControl",id:"virtualAuthorFilterTb",type:"text",oninput:S()("value",(function(e){t.filterString=e})),placeholder:x.a.translator.trans("davwheat-virtual-authors.forum.set_modal.search")})),m("div",{className:"Form-group VirtualAuthorList"},this.filteredVirtualAuthors.map((function(e){return t.virtualAuthorListItem(e)}))),m(h.a,{class:"Button Button--primary",type:"submit"},x.a.translator.trans("davwheat-virtual-authors.forum.set_modal.save"))):m("div",{class:"Modal-body"},m(b.a,null))},r.isVirtualAuthorSelected=function(t){return this.selectedVirtualAuthors.some((function(e){return e.id===t.id()}))},r.addVirtualAuthor=function(t){this.selectedVirtualAuthors.push({id:t.id(),credit:""}),m.redraw()},r.removeVirtualAuthor=function(t){this.selectedVirtualAuthors=this.selectedVirtualAuthors.filter((function(e){return e.id!==t.id()})),m.redraw()},r.virtualAuthorListItem=function(t){var e=this;return m("div",{className:"VirtualAuthorListItem",key:t.id()},m("div",{className:"VirtualAuthorListItem-displayName"},t.displayName()),m("div",{className:"VirtualAuthorListItem-description"},Object(O.truncate)(t.description(),75)),this.isVirtualAuthorSelected(t)?m(L.a,{text:x.a.translator.trans("davwheat-virtual-authors.forum.set_modal.virtual_author_exists")},m(h.a,{disabled:!0,class:"Button",icon:"fas fa-plus",onclick:function(){return e.addVirtualAuthor(t)}},x.a.translator.trans("davwheat-virtual-authors.forum.set_modal.add_button"))):m(h.a,{class:"Button",icon:"fas fa-plus",onclick:function(){return e.addVirtualAuthor(t)}},x.a.translator.trans("davwheat-virtual-authors.forum.set_modal.add_button")))},r.selectedVirtualAuthorItem=function(t){var e=this,r=x.a.store.getById("virtualAuthors",t.id);return m("div",{className:"SelectedVirtualAuthorListItem",key:t.id},m("div",{className:"SelectedVirtualAuthorListItem-displayName"},r.displayName()),m("div",{className:"SelectedVirtualAuthorListItem-credit"},m("input",{class:"FormControl",type:"text",value:t.credit,oninput:S()("value",(function(e){return t.credit=e})),placeholder:x.a.translator.trans("davwheat-virtual-authors.forum.set_modal.credit_placeholder")})),m(h.a,{class:"Button",icon:"fas fa-minus",onclick:function(){return e.removeVirtualAuthor(r)}},x.a.translator.trans("davwheat-virtual-authors.forum.set_modal.delete_button")))},r.loadData=function(){var t=Object(l.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.allVirtualAuthors=null,m.redraw(),t.prev=2,t.next=5,x.a.store.find("virtualAuthors");case 5:this.allVirtualAuthors=x.a.store.all("virtualAuthors"),m.redraw(),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(2),this.onerror(t.t0),console.error(t.t0),m.redraw();case 14:case"end":return t.stop()}}),t,this,[[2,9]])})));return function(){return t.apply(this,arguments)}}(),r.onsubmit=function(t){this.save(),t.preventDefault()},r.save=function(){var t=Object(l.a)(g.a.mark((function t(){var e,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,m.redraw(),e={virtualAuthorsCredit:this.selectedVirtualAuthors.reduce((function(t,e){return t[e.id]=e.credit,t}),{}),relationships:{virtualAuthors:this.selectedVirtualAuthors.map((function(t){return x.a.store.getById("virtualAuthors",t.id)}))||[]}},t.prev=3,t.next=6,this.attrs.discussion.save(e);case 6:r=t.sent,x.a.store.pushPayload(r),this.hide(),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),this.onerror(t.t0),console.error(t.t0);case 15:case"end":return t.stop()}}),t,this,[[3,11]])})));return function(){return t.apply(this,arguments)}}(),d(e,[{key:"filteredVirtualAuthors",get:function(){return this.filterString?this.allVirtualAuthors?new At(this.allVirtualAuthors,{keys:[{name:"data.attributes.displayName",weight:2},"data.attributes.description","data.id"]}).search(this.filterString).map((function(t){return t.item})):[]:this.allVirtualAuthors}}]),e}(_.a),kt=r(18),St=r.n(kt);i.a.initializers.add("davwheat/manual-blog-authors",(function(){Object(c.a)(),Object(o.extend)(s.a,"moderationControls",(function(t,e){e.canSetVirtualAuthors()&&t.add("setVirtualAuthors",m(h.a,{icon:"fas fa-ghost",onclick:function(){i.a.modal.show(Lt,{discussion:e})}},i.a.translator.trans("davwheat-virtual-authors.forum.discussion_controls.set_virtual_authors")))})),"v17development-blog"in flarum.extensions&&Object(o.extend)(St.a.prototype,"manageArticleButtons",(function(t){var e=this;this.attrs.article.canSetVirtualAuthors()&&t.add("setVirtualAuthors",m(h.a,{icon:"fas fa-ghost",onclick:function(){i.a.modal.show(Lt,{discussion:e.attrs.article})}},i.a.translator.trans("davwheat-virtual-authors.forum.discussion_controls.set_virtual_authors")))}))}))}]);
//# sourceMappingURL=forum.js.map